'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var express = _interopDefault(require('express'));
var graphql = require('graphql');
var graphql$1 = _interopDefault(require('express-graphql'));
var knex = _interopDefault(require('knex'));
var fs = _interopDefault(require('fs'));

function connectDatabase() {
    var connectionJson = fs.readFileSync("./config/connection.json", { encoding: "utf8" });
    var json = JSON.parse(connectionJson);
    var database = json.database;
    return knex({
        client: database.driver,
        version: database.version,
        connection: {
            host: database.host,
            user: database.user,
            password: database.password,
            database: database.database,
            filename: database.filename
        }
    });
}
function initalizeDatabase() {
    var db = connectDatabase();
}

initalizeDatabase();
var app = express();
//app.use(jwt({ secret: "lol" }).unless({ path: ["/auth"] }));
app.use("/api/get", graphql$1({
    schema: graphql.buildSchema("\n        type Query {\n            hello: String\n        }\n    "),
    graphiql: true,
    rootValue: {
        hello: function () { return "Hello world"; }
    }
}));
app.listen(3000, function () {
    console.log("ðŸš€ Listening...");
});
